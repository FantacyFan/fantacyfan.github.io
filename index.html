<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Benran's Page</title>
	<link href="lib/bootstrap.min.css" type="text/css" rel="stylesheet" />
	<link href="css/style.css" type="text/css" rel="stylesheet" />
	<!-- <link href='http://fonts.googleapis.com/css?family=Lato:300italic' rel='stylesheet' type='text/css'> -->
	<script type="text/javascript" language="javascript" src="lib/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" language="javascript" src="lib/bootstrap.min.js"></script>
	<script type="text/javascript" language="javascript" src="lib/d3.min.js"></script>
	
</head>
<body onload="sizeChange">
	<div id="container">
		<div class="header ">
		<div id="nav">
			<div class="col-md-2"></div>
			<nav>
				<ul class="col-md-8">
					<a href="#home"><li id="homepage">我的主页</li></a>
					<a href="#projects"><li id="projectpage">项目经历</li></a>
					<a href="#skills"><li id="skillpage">我的技能</li></a>
					<a href="#contact"><li id="contactpage">联系我</li></a>
					
				</ul>
				
			</nav>
			<div class="col-md-2">
				<div class="navMenu" id="navMenu" role="button" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
					<span><hr></span>
					<span><hr></span>
					<span><hr></span>
				</div>
			</div>
		</div>
		</div>

		<!-- 下拉菜单开始 -->
		<div class="collapse" id="collapseExample">
		  <div class="well">
		    	<div class="topNav" id="topNav">
					<ul>
					<a href="#home"><li id="homepage">我的主页</li></a>
					<a href="#projects"><li id="projectpage">项目经历</li></a>
					<a href="#skills"><li id="skillpage">我的技能</li></a>
					<a href="#contact"><li id="contactpage">联系我</li></a>
					</ul>
				</div>
		  </div>
		</div>
		<!-- 下拉菜单结束 -->



		<div class="wrapper">
			<section class="home" id="home">
				<div class="stamp_div">
					<img id="stamp" src="img/07240832438.png" alt="stamp"/>
				</div>
				<div class="main_bg">
					<span class="welcome">嗨!  &nbsp 我就是</span><br>
					<span class="name">F</span>
					<span class="name">A</span>
					<span class="name">N</span>
					<span class="name">&nbsp</span>
					<span class="name">B</span>
					<span class="name">E</span>
					<span class="name">N</span>
					<span class="name">R</span>
					<span class="name">A</span>
					<span class="name">N</span>
					<div class='content row'>
					    <div class='visible'>
					        <ul>
					        	<li>90后 IT包装 产品内核</li>
					        	<li>自我介绍1</li>
					            <li>自我介绍2</li>
					        </ul>
					    </div>
					</div>
				</div>
				<!-- <div class="bg_img">
				<img id="bj_img" src="img/sy_201001161434569970-1.png" alt="bj" />
					<img id="ny_img" src="img/14039406795980.png" alt="ny" />
				</div> -->
			</section>

			<div class="main">
			<section class="projects" id="projects">
				<div class="project_wrapper row">
					<div class="inner_project">
					<h2>我的产品库</h2>
					<div class="project_list row">
						<div class="item1 col-md-6 col-xs-12" style="width:430px">
							<img id="item1" src="img/csc.jpg" />
						</div>
						<div class="item2 col-md-3 col-xs-12" style="width:200px">
							<img id="item2" src="img/picpulse.jpg" />
						</div>
						<div class="item3 col-md-3 col-xs-12" style="width:200px">
							<img id="item3" src="img/tsinghua.jpg" />
						</div>

						<div class="item4 col-md-3 col-xs-12" style="width:200px">
							<a href="samsung.html"><img id="item4" src="img/samsung.jpg" /></a>
						</div>
						<div class="item5 col-md-6 col-xs-12" style="width:430px">
							<img id="item5" src="img/savorlink.jpg" />
						</div>	
						<div class="item6 col-md-3 col-xs-12" style="width:200px">
							<img id="item6" src="img/solescription.jpg" />
						</div>

						<div class="item7 col-md-6 col-xs-12" style="width:400px">
							<a href="data.html"><img id="item7" src="img/data.jpg" /></a>
						</div>
						<div class="item8 col-md-6 col-xs-12" style="width:400px">
							<img id="item8" src="img/meridian.jpg" />
						</div>
					</div>
					</div>
				</div>


				<div class="sm_project_list row">
					<div class="item1">
							<img id="item1" src="img/csc.jpg" />
						</div>
						<div class="item2">
							<img id="item2" src="img/picpulse_sm.jpg" />
						</div>
						<div class="item3">
							<img id="item3" src="img/tsinghua_sm.jpg" />
						</div>

						<div class="item4">
							<a href="samsung.html"><img id="item4" src="img/samsung_sm.jpg" /></a>
						</div>
						<div class="item5">
							<img id="item5" src="img/savorlink.jpg" />
						</div>	
						<div class="item6">
							<img id="item6" src="img/solescription_sm.jpg" />
						</div>

						<div class="item7">
							<img id="item7" src="img/data.jpg" />
						</div>
						<div class="item8">
							<img id="item8" src="img/meridian.jpg" />
						</div>
				</div>
			</section>



			<section class="skills" id="skills">
				<div class="show_skills">
					<h2>我的技能卡</h2>
					<h5>点击节点查看</h5>
				</div> 
			</section>
			</div>			
		</div>
	</div>

	<div class="footer" id="contact">

		<div id="modalContent">
			<div class="qrcode">
				<img id="qrcode" src="img/qrcode.jpg" alt="qrcode" />
			</div>
			<div class="qr-text">
				扫描二维码添加我的微信
			</div>
		</div>
		<div class="row">
			<img id="corner_1" src="img/310695.png" alt="corner">
			<img id="corner_4" src="img/310695.png" alt="corner">
		</div>
		<div class="row">
			<div class="social col-md-4">
				
				<div class="text">在这里可以找到我</div>
				<div class="icons social">
					<a href="https://www.facebook.com/benran.fan"><img id="facebook" src="img/facebook.png" alt="facebook"/></a>
					<a href="https://www.linkedin.com/profile/view?id=275121430&trk=hp-identity-name"><img id="linkedin" src="img/linkedin.png" alt="linkedin"/></a>
					<a href="https://github.com/FantacyFan"><img id="googleplus" src="img/googleplus.png" alt="googleplus"/></a>
					<a href="javascript:void" onclick="return popup();"><img id="wechat" src="img/wechat.png" alt="wechat"/></a>
				</div>
			</div>
			<div class="contact col-md-4">
				<div class="icons">
					<img id="email" src="img/email.png" alt="email"/>
					&nbsp&nbsp EMAIL: bf295@cornell.edu
				</div>
				<div class="icons cell">
					<img id="cell" src="img/cell.png" alt="cell"/>
					电话: +86 170-900-72115
				</div>
			</div>
			<div class="resume col-md-4">
				<div class="icons">
					<img id="pdf" src="img/pdf.png" alt="pdf"/>
				</div>
				<div class="text">点击下载我的简历</div>
			</div>
		</div>
		<div class="row copyright">
			© 2015 BENRAN FAN
			<img id="corner_2" src="img/310695.png" alt="corner">
			<img id="corner_3" src="img/310695.png" alt="corner">
		</div>

	</div>
	<div id="blackOverlay"></div>



	<script>
			function popup(){
				$('#blackOverlay').show();
				$('#modalContent').show();
				$('#modalContent').css({
					left: ($(window).width() - 400) / 2,
					bottom: ($(window).height() - 200) /2 + 30,
					opacity: 0
				});
				$('#modalContent').animate({
					opacity: 1,
					bottom: ($(window).height() - 200) /2 - 60
				}, 300);


				$(window).resize(function(){	
					$('#modalContent').css({
						left: ($(window).width() - 400) / 2,
						bottom: ($(window).height() - 200) /2-30
					});
				});
				$('#blackOverlay').click(function(){
					$(this).hide();
					$('#modalContent').hide();
				});
				return false;
			};
		</script>




	<script>
	var width = 660;
	var height = 550;

	d3.select(window)
    		.on("resize", sizeChange);

	//边界空白
	var padding = {left: 200, right:220, top: 20, bottom: 20 };

	var svg = d3.select(".show_skills")
	           .append("svg")
	           .attr("width", $(window).width()/1.3)
	           .attr("height", $(window).width()/2)
	           .append("g")
	           .attr("transform","translate("+ padding.left + "," + padding.top + ")");
	           

	//树状图布局
	var tree = d3.layout.tree()
	            .size([height, width]);

	//对角线生成器
	var diagonal = d3.svg.diagonal()
	    .projection(function(d) { return [d.y, d.x]; });


	d3.json("learn.json",function(error,root){

	  //给第一个节点添加初始坐标x0和x1
	  root.x0 = height / 2;
	  root.y0 = 0;

	  //以第一个节点为起始节点，重绘
	  redraw(root);

	  //重绘函数
	  function redraw(source){

	    /*
	    （1） 计算节点和连线的位置
	    */

	    //应用布局，计算节点和连线
	    var nodes = tree.nodes(root);
	    var links = tree.links(nodes);

	    //重新计算节点的y坐标
	    nodes.forEach(function(d) { d.y = d.depth * 180; });

	    /*
	    （2） 节点的处理
	    */

	    //获取节点的update部分
	    var nodeUpdate = svg.selectAll(".node")
	                        .data(nodes, function(d){ return d.name; });

	    //获取节点的enter部分
	    var nodeEnter = nodeUpdate.enter();

	    //获取节点的exit部分
	    var nodeExit = nodeUpdate.exit();

	    //1. 节点的 Enter 部分的处理办法
	    var enterNodes = nodeEnter.append("g")
	                    .attr("class","node")
	                    .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
	                    .on("click", function(d) { toggle(d); redraw(d); });

	    enterNodes.append("circle")
	      .attr("r", 0)
	      .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

	    enterNodes.append("text")
	        .attr("x", function(d) { return d.children || d._children ? -14 : 14; })
	        .attr("dy", ".35em")
	        .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
	        .text(function(d) { return d.name; })
	        .style("fill-opacity", 0);


	    //2. 节点的 Update 部分的处理办法
	    var updateNodes = nodeUpdate.transition()
	                        .duration(500)
	                        .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

	    updateNodes.select("circle")
	      .attr("r", 8)
	      .style("fill", function(d) { return d._children ? "#00a2ff" : "#fff"; });

	    updateNodes.select("text")
	      .style("fill-opacity", 1);

	    //3. 节点的 Exit 部分的处理办法
	    var exitNodes = nodeExit.transition()
	                      .duration(500)
	                      .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
	                      .remove();

	    exitNodes.select("circle")
	      .attr("r", 0);

	    exitNodes.select("text")
	      .style("fill-opacity", 0);

	    d3.selectAll("text").style("color","white");

	    /*
	    （3） 连线的处理
	    */

	    //获取连线的update部分
	    var linkUpdate = svg.selectAll(".link")
	                        .data(links, function(d){ return d.target.name; });

	    //获取连线的enter部分
	    var linkEnter = linkUpdate.enter();

	    //获取连线的exit部分
	    var linkExit = linkUpdate.exit();

	    //1. 连线的 Enter 部分的处理办法
	    linkEnter.insert("path",".node")
	          .attr("class", "link")
	          .attr("d", function(d) {
	              var o = {x: source.x0, y: source.y0};
	              return diagonal({source: o, target: o});
	          })
	          .transition()
	          .duration(500)
	          .attr("d", diagonal);

	    //2. 连线的 Update 部分的处理办法
	    linkUpdate.transition()
	        .duration(500)
	        .attr("d", diagonal);

	    //3. 连线的 Exit 部分的处理办法
	    linkExit.transition()
	          .duration(500)
	          .attr("d", function(d) {
	            var o = {x: source.x, y: source.y};
	            return diagonal({source: o, target: o});
	          })
	          .remove();


	    /*
	    （4） 将当前的节点坐标保存在变量x0、y0里，以备更新时使用
	    */
	    nodes.forEach(function(d) {
	      d.x0 = d.x;
	      d.y0 = d.y;
	    });

	  }

	  //切换开关，d 为被点击的节点
	  function toggle(d){
	    if(d.children){ //如果有子节点
	      d._children = d.children; //将该子节点保存到 _children
	      d.children = null;  //将子节点设置为null
	    }else{  //如果没有子节点
	      d.children = d._children; //从 _children 取回原来的子节点 
	      d._children = null; //将 _children 设置为 null
	    }
	  }

	});
	
	function sizeChange() {
		// resize map
		if($(window).width()>=992){
		    d3.select(".show_skills g").attr("transform", "scale(" + 0.6*$(window).width()/width + ") translate("+ 0.2*width + "," + 0.04*height + ")");
		    
		    $(".show_skills svg").width($(window).width());
		    $(".show_skills svg").height($(window).width()/1.7);
		}else{
		    d3.select(".show_skills g").attr("transform", "scale(" + 0.6*$(window).width()/width + ") translate("+ width/8 + "," + height/9 + ")");

		    $(".show_skills svg").width($(window).width()/1.1);
		    $(".show_skills svg").height($(window).width()/5*3);

		}
	}
	setInterval(sizeChange, 500);

	</script>
</body>
</html>